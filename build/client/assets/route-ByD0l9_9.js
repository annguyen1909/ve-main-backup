import{r,j as e}from"./jsx-runtime-kF-aRxYe.js";import{C as P}from"./container-CojEoyE2.js";import{M as T,C as D,a as _,b as A}from"./icon-1JAR9nfD.js";import{t as q}from"./utils-D0ylI7G6.js";import{C as F,a as G,b as W}from"./carousel-7zbWv1Ed.js";import{e as X,u as B,a as K}from"./i18n-DH-wL5Eu.js";import{c as L}from"./createLucideIcon-C2Ywi-cO.js";import{b as O,u as R,P as V,c as H,d as J,L as Q,M as U}from"./elements--fEydBSX.js";import"./resolve-elements-WL2ErOKm.js";const Y=L("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Z=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);class ee extends r.Component{getSnapshotBeforeUpdate(f){const n=this.props.childRef.current;if(n&&f.isPresent&&!this.props.isPresent){const h=n.offsetParent,y=h instanceof HTMLElement&&h.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=y-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function te({children:l,isPresent:f,anchorX:n}){const h=r.useId(),y=r.useRef(null),c=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=r.useContext(O);return r.useInsertionEffect(()=>{const{width:m,height:p,top:j,left:i,right:x}=c.current;if(f||!y.current||!m||!p)return;const v=n==="left"?`left: ${i}`:`right: ${x}`;y.current.dataset.motionPopId=h;const u=document.createElement("style");return b&&(u.nonce=b),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${p}px !important;
            ${v}px !important;
            top: ${j}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[f]),e.jsx(ee,{isPresent:f,childRef:y,sizeRef:c,children:r.cloneElement(l,{ref:y})})}const se=({children:l,initial:f,isPresent:n,onExitComplete:h,custom:y,presenceAffectsLayout:c,mode:b,anchorX:m})=>{const p=R(oe),j=r.useId(),i=r.useCallback(v=>{p.set(v,!0);for(const u of p.values())if(!u)return;h&&h()},[p,h]),x=r.useMemo(()=>({id:j,initial:f,isPresent:n,custom:y,onExitComplete:i,register:v=>(p.set(v,!1),()=>p.delete(v))}),c?[Math.random(),i]:[n,i]);return r.useMemo(()=>{p.forEach((v,u)=>p.set(u,!1))},[n]),r.useEffect(()=>{!n&&!p.size&&h&&h()},[n]),b==="popLayout"&&(l=e.jsx(te,{isPresent:n,anchorX:m,children:l})),e.jsx(V.Provider,{value:x,children:l})};function oe(){return new Map}const k=l=>l.key||"";function I(l){const f=[];return r.Children.forEach(l,n=>{r.isValidElement(n)&&f.push(n)}),f}const $=({children:l,custom:f,initial:n=!0,onExitComplete:h,presenceAffectsLayout:y=!0,mode:c="sync",propagate:b=!1,anchorX:m="left"})=>{const[p,j]=H(b),i=r.useMemo(()=>I(l),[l]),x=b&&!p?[]:i.map(k),v=r.useRef(!0),u=r.useRef(i),C=R(()=>new Map),[S,N]=r.useState(i),[g,t]=r.useState(i);J(()=>{v.current=!1,u.current=i;for(let d=0;d<g.length;d++){const a=k(g[d]);x.includes(a)?C.delete(a):C.get(a)!==!0&&C.set(a,!1)}},[g,x.length,x.join("-")]);const s=[];if(i!==S){let d=[...i];for(let a=0;a<g.length;a++){const w=g[a],M=k(w);x.includes(M)||(d.splice(a,0,w),s.push(w))}return c==="wait"&&s.length&&(d=s),t(I(d)),N(i),null}const{forceRender:o}=r.useContext(Q);return e.jsx(e.Fragment,{children:g.map(d=>{const a=k(d),w=b&&!p?!1:i===g||x.includes(a),M=()=>{if(C.has(a))C.set(a,!0);else return;let E=!0;C.forEach(z=>{z||(E=!1)}),E&&(o?.(),t(u.current),b&&j?.(),h&&h())};return e.jsx(se,{isPresent:w,initial:!v.current||n?void 0:!1,custom:f,presenceAffectsLayout:y,mode:c,onExitComplete:w?void 0:M,anchorX:m,children:d},a)})})},fe=({data:l})=>[{title:q(l?.locale==="ko"?l.category.slug==="image"?"조감도 | 투시도 | 건축CG | 분양CG":"건축CG영상":l?.category.title)},{name:"description",content:l?.category.description}];function he(){const[l,f]=X(),{translations:n}=B(),{projects:h,tags:y}=K(),[c,b]=r.useState(l.get("q")??!1),[m,p]=r.useState(null),[j,i]=r.useState(0),[x,v]=r.useState(!1),[u,C]=r.useState(null);function S(t,s=0){p(t),i(s),v(!0)}function N(){v(!1),p(null),i(0)}const g=r.useCallback(t=>{if(!m)return;const s=m.images.length;if(u){t==="prev"?u.scrollPrev():u.scrollNext();return}i(t==="prev"?o=>o>0?o-1:s-1:o=>o<s-1?o+1:0)},[m,u]);return r.useEffect(()=>{c||f(new URLSearchParams)},[c,f]),r.useEffect(()=>{function t(s){x&&(s.key==="ArrowLeft"&&(s.preventDefault(),g("prev")),s.key==="ArrowRight"&&(s.preventDefault(),g("next")))}return x&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="auto"}},[x,g]),r.useEffect(()=>{function t(s){s.preventDefault()}return document.addEventListener("contextmenu",t),()=>document.removeEventListener("contextmenu",t)},[]),e.jsxs("section",{className:"min-h-dvh h-auto text-white pt-20",children:[e.jsxs(P,{variant:"fluid",className:"sm:!px-10 mt-4 !py-0 flex flex-col md:flex-row md:items-center gap-5 md:gap-7",children:[e.jsxs("div",{className:"flex items-center gap-5 flex-none",children:[e.jsxs("button",{className:"font-semibold text-lg 2xl:text-xl flex items-center cursor-pointer",onClick:()=>b(!c),children:[c?e.jsx(Y,{className:"size-5 mr-2"}):e.jsx(Z,{className:"size-5 mr-2"}),n["Search & Filter"]]}),e.jsxs("span",{className:"font-light text-sm 2xl:text-base",children:[h.length," ",n.projects]})]}),e.jsx($,{children:c?e.jsxs(U,{className:"flex-none items-center gap-7 flex max-w-full grow",initial:{translateX:"-10%",opacity:0},animate:{translateX:"0%",opacity:100},exit:{translateX:"-10%",opacity:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-32 flex-none",children:[e.jsx("input",{type:"search",className:"outline-none bg-transparent border-b border-b-white py-0.5 rounded-none",placeholder:n["Search works..."],defaultValue:l.get("q")??"","data-koreanable":!0,onChange:t=>{const s=l;s.set("q",t.target.value.trim()),f(s)}}),e.jsx(T,{className:"-scale-x-100 text-white size-5"})]}),e.jsx("div",{className:"flex items-center gap-5 font-extralight overflow-auto max-w-full",children:y.map(t=>e.jsx("button",{type:"button",onClick:()=>{const s=l;s.set("tag_id",t.id),f(s)},children:t.name},t.id))})]}):null})]}),e.jsx(P,{variant:"fluid",className:"sm:!px-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-2",children:h.map((t,s)=>{const o=t.images[0],d=o.mediaType==="video"&&!!o.videoUrl;return e.jsx("button",{type:"button",onClick:()=>S(t,0),className:"group cursor-pointer",onMouseEnter:()=>{const a=document.querySelector(`video[data-project-index="${s}"]`);a&&a.play().catch(()=>{})},onMouseLeave:()=>{const a=document.querySelector(`video[data-project-index="${s}"]`);a&&a.pause()},children:e.jsxs("div",{className:`aspect-[4/3] relative overflow-hidden transition-all duration-300 ${d?"group-hover:shadow-2xl":"group-hover:shadow-2xl group-hover:bg-white/60"}`,children:[o.mediaType==="video"&&o.videoUrl?/youtube\.com|youtu\.be|vimeo\.com/i.test(o.videoUrl)?e.jsx("iframe",{className:"w-full h-full object-cover",src:o.videoUrl.includes("youtu")?o.videoUrl.replace(/watch\?v=/,"embed/").replace("youtu.be/","www.youtube.com/embed/"):o.videoUrl.includes("vimeo")?o.videoUrl.replace(/vimeo\.com\//,"player.vimeo.com/video/"):o.videoUrl,title:t.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsx("video",{className:"w-full h-full object-cover",src:o.videoUrl,muted:!0,playsInline:!0,loop:!0,preload:"metadata","data-project-index":s,onLoadedMetadata:a=>{try{const w=a.currentTarget;w.readyState>=1&&(w.currentTime=.05,w.pause())}catch{}}}):e.jsx("img",{src:o.url,alt:t.title,className:"w-full h-full group-hover:scale-105 group-hover:blur-[1.5px] object-cover transition-transform duration-300",loading:"lazy"}),d?e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out pointer-events-none",children:e.jsx("div",{className:"absolute bottom-[40%] left-0 right-0 p-4 text-white transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 ease-out",children:e.jsx("h3",{className:"font-medium text-lg mb-1 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out","data-koreanable":!0,children:t.title})})}):e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out",children:e.jsx("div",{className:"absolute bottom-[40%] left-0 right-0 p-4 text-white transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 ease-out",children:e.jsx("h3",{className:"font-medium text-lg mb-1 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out","data-koreanable":!0,children:t.title})})})]})},t.title)})})}),e.jsx($,{children:x&&m&&e.jsx(U,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeOut"},className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:t=>{t.target===t.currentTarget&&N()},children:e.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-full flex flex-col",children:[e.jsxs("div",{className:"text-center mb-4 px-4",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-medium text-white mb-2","data-koreanable":!0,children:m.title}),e.jsx("p",{className:"text-gray-300 text-sm lg:text-base font-light",children:m.description})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 mb-6 relative",children:e.jsx(F,{setApi:t=>{t&&(C(t),typeof t.on=="function"&&t.on("select",()=>{const s=t.selectedScrollSnap?.();i(typeof s=="number"?s:0)}),typeof t.scrollTo=="function"&&t.scrollTo(j||0))},children:e.jsx(G,{className:"h-full",children:m.images.map(t=>e.jsx(W,{className:"relative w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"relative inline-block max-w-full",children:[t.mediaType==="video"&&t.videoUrl?/youtube\.com|youtu\.be|vimeo\.com/i.test(t.videoUrl)?e.jsx("iframe",{src:t.videoUrl.includes("youtu")?t.videoUrl.replace(/watch\?v=/,"embed/").replace("youtu.be/","www.youtube.com/embed/"):t.videoUrl.includes("vimeo")?t.videoUrl.replace(/vimeo\.com\//,"player.vimeo.com/video/"):t.videoUrl,className:"max-w-full max-h-[60vh] object-contain rounded-lg",title:m.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsx("video",{src:t.videoUrl||void 0,className:"max-w-full max-h-[60vh] object-contain rounded-lg",controls:!0,autoPlay:!0,playsInline:!0,controlsList:"nodownload",muted:!0}):e.jsx("img",{src:t.url,alt:t.title,className:"max-w-full max-h-[60vh] object-contain rounded-lg"}),e.jsx("button",{onClick:N,"aria-label":"Close",className:"absolute right-3 top-3 z-50 text-white transition-colors bg-black/40 hover:bg-black/60 rounded-full p-3 cursor-pointer ring-2 ring-white/20",children:e.jsx(D,{className:"w-4 h-4"})})]})},t.id))})})}),m.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors bg-black/50 rounded-full p-3",children:e.jsx(_,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>g("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors bg-black/50 rounded-full p-3",children:e.jsx(A,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-none px-2 sm:px-4 pb-4",children:[e.jsx("div",{className:"flex gap-1 sm:gap-2 justify-start sm:justify-center scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 pb-2",children:m.images.map((t,s)=>e.jsx("button",{type:"button",onClick:()=>{u&&typeof u.scrollTo=="function"?u.scrollTo(s):i(s)},className:`flex-none w-16 h-12 sm:w-20 sm:h-16 rounded-md overflow-hidden transition-all duration-200 hover:scale-105 ${s===j?"ring-2 ring-white ring-offset-1 sm:ring-offset-2 ring-offset-black":"opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:t.url,alt:t.title,className:"w-full h-full object-cover",loading:"lazy",onError:o=>{const d=o.target;if(d.src.includes("optimize_attachment_url")){const a=t.url.replace(/optimize_attachment_url/g,"attachment_url");d.src=a}}})},t.id))}),e.jsx("div",{className:"mt-2 sm:mt-4 text-center text-gray-300",children:e.jsx("span",{className:"text-xs sm:text-sm",children:(()=>{const t=m.images,s=t.filter(d=>d.mediaType==="image").length,o=t.filter(d=>d.mediaType==="video").length;return o>0&&s===0?`${o} ${o===1?"video":"videos"}`:s>0&&o===0?`${s} ${s===1?"image":"images"}`:`${o} ${o===1?"video":"videos"} · ${s} ${s===1?"image":"images"}`})()})})]})]})})})]})}export{he as default,fe as meta};
