import{r as n,j as e}from"./jsx-runtime-kF-aRxYe.js";import{C as L}from"./container-2TlAo-hG.js";import{M as A,C as q,a as D,b as G}from"./icon-CP4mJMRx.js";import{t as F}from"./utils-tQ8evKDJ.js";import{C as W,a as X,b as K}from"./carousel-9jwcCCO4.js";import{e as O,u as V,a as Z}from"./i18n-DH-wL5Eu.js";import{c as I}from"./createLucideIcon-C2Ywi-cO.js";import{b as B,u as _,P as H,c as Y,d as J,L as Q,M as T}from"./elements-Dbp8aVoy.js";import"./resolve-elements-WL2ErOKm.js";const ee=I("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),te=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);class se extends n.Component{getSnapshotBeforeUpdate(h){const l=this.props.childRef.current;if(l&&h.isPresent&&!this.props.isPresent){const f=l.offsetParent,y=f instanceof HTMLElement&&f.offsetWidth||0,u=this.props.sizeRef.current;u.height=l.offsetHeight||0,u.width=l.offsetWidth||0,u.top=l.offsetTop,u.left=l.offsetLeft,u.right=y-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oe({children:i,isPresent:h,anchorX:l}){const f=n.useId(),y=n.useRef(null),u=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=n.useContext(B);return n.useInsertionEffect(()=>{const{width:m,height:p,top:j,left:c,right:v}=u.current;if(h||!y.current||!m||!p)return;const g=l==="left"?`left: ${c}`:`right: ${v}`;y.current.dataset.motionPopId=f;const d=document.createElement("style");return b&&(d.nonce=b),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${f}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${p}px !important;
            ${g}px !important;
            top: ${j}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[h]),e.jsx(se,{isPresent:h,childRef:y,sizeRef:u,children:n.cloneElement(i,{ref:y})})}const ae=({children:i,initial:h,isPresent:l,onExitComplete:f,custom:y,presenceAffectsLayout:u,mode:b,anchorX:m})=>{const p=_(re),j=n.useId(),c=n.useCallback(g=>{p.set(g,!0);for(const d of p.values())if(!d)return;f&&f()},[p,f]),v=n.useMemo(()=>({id:j,initial:h,isPresent:l,custom:y,onExitComplete:c,register:g=>(p.set(g,!1),()=>p.delete(g))}),u?[Math.random(),c]:[l,c]);return n.useMemo(()=>{p.forEach((g,d)=>p.set(d,!1))},[l]),n.useEffect(()=>{!l&&!p.size&&f&&f()},[l]),b==="popLayout"&&(i=e.jsx(oe,{isPresent:l,anchorX:m,children:i})),e.jsx(H.Provider,{value:v,children:i})};function re(){return new Map}const $=i=>i.key||"";function U(i){const h=[];return n.Children.forEach(i,l=>{n.isValidElement(l)&&h.push(l)}),h}const R=({children:i,custom:h,initial:l=!0,onExitComplete:f,presenceAffectsLayout:y=!0,mode:u="sync",propagate:b=!1,anchorX:m="left"})=>{const[p,j]=Y(b),c=n.useMemo(()=>U(i),[i]),v=b&&!p?[]:c.map($),g=n.useRef(!0),d=n.useRef(c),N=_(()=>new Map),[E,P]=n.useState(c),[w,C]=n.useState(c);J(()=>{g.current=!1,d.current=c;for(let s=0;s<w.length;s++){const r=$(w[s]);v.includes(r)?N.delete(r):N.get(r)!==!0&&N.set(r,!1)}},[w,v.length,v.join("-")]);const t=[];if(c!==E){let s=[...c];for(let r=0;r<w.length;r++){const a=w[r],x=$(a);v.includes(x)||(s.splice(r,0,a),t.push(a))}return u==="wait"&&t.length&&(s=t),C(U(s)),P(c),null}const{forceRender:o}=n.useContext(Q);return e.jsx(e.Fragment,{children:w.map(s=>{const r=$(s),a=b&&!p?!1:c===w||v.includes(r),x=()=>{if(N.has(r))N.set(r,!0);else return;let k=!0;N.forEach(M=>{M||(k=!1)}),k&&(o?.(),C(d.current),b&&j?.(),f&&f())};return e.jsx(ae,{isPresent:a,initial:!g.current||l?void 0:!1,custom:h,presenceAffectsLayout:y,mode:u,onExitComplete:a?void 0:x,anchorX:m,children:s},r)})})},pe=({data:i})=>[{title:F(i?.locale==="ko"?i.category.slug==="image"?"조감도 | 투시도 | 건축CG | 분양CG":"건축CG영상":i?.category.title)},{name:"description",content:i?.category.description}];function xe(){const[i,h]=O(),{translations:l}=V(),{projects:f,tags:y}=Z(),[u,b]=n.useState(i.get("q")??!1),[m,p]=n.useState(null),[j,c]=n.useState(0),[v,g]=n.useState(!1),[d,N]=n.useState(null);function E({url:t,title:o,className:s}){function r(k){try{const z=new URL(k).searchParams.get("v");if(z&&z.length===11)return z}catch{}const M=k.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([A-Za-z0-9_-]{11})/i);return M?M[1]:void 0}const a=r(t),x=a?`https://www.youtube.com/embed/${a}?controls=1&modestbranding=1&rel=0&playsinline=1`:t;return e.jsx("iframe",{className:s,src:x,title:o,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}function P(t,o=0){p(t),c(o),g(!0)}function w(){g(!1),p(null),c(0)}const C=n.useCallback(t=>{if(!m)return;const o=m.images.length;if(d){t==="prev"?d.scrollPrev():d.scrollNext();return}c(t==="prev"?s=>s>0?s-1:o-1:s=>s<o-1?s+1:0)},[m,d]);return n.useEffect(()=>{u||h(new URLSearchParams)},[u,h]),n.useEffect(()=>{function t(o){v&&(o.key==="ArrowLeft"&&(o.preventDefault(),C("prev")),o.key==="ArrowRight"&&(o.preventDefault(),C("next")))}return v&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="auto"}},[v,C]),n.useEffect(()=>{function t(o){o.preventDefault()}return document.addEventListener("contextmenu",t),()=>document.removeEventListener("contextmenu",t)},[]),e.jsxs("section",{className:"min-h-dvh h-auto text-white pt-20",children:[e.jsxs(L,{variant:"fluid",className:"sm:!px-10 mt-4 !py-0 flex flex-col md:flex-row md:items-center gap-5 md:gap-7",children:[e.jsxs("div",{className:"flex items-center gap-5 flex-none",children:[e.jsxs("button",{className:"font-semibold text-lg 2xl:text-xl flex items-center cursor-pointer",onClick:()=>b(!u),children:[u?e.jsx(ee,{className:"size-5 mr-2"}):e.jsx(te,{className:"size-5 mr-2"}),l["Search & Filter"]]}),e.jsxs("span",{className:"font-light text-sm 2xl:text-base",children:[f.length," ",l.projects]})]}),e.jsx(R,{children:u?e.jsxs(T,{className:"flex-none items-center gap-7 flex max-w-full grow",initial:{translateX:"-10%",opacity:0},animate:{translateX:"0%",opacity:100},exit:{translateX:"-10%",opacity:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-32 flex-none",children:[e.jsx("input",{type:"search",className:"outline-none bg-transparent border-b border-b-white py-0.5 rounded-none",placeholder:l["Search works..."],defaultValue:i.get("q")??"","data-koreanable":!0,onChange:t=>{const o=i;o.set("q",t.target.value.trim()),h(o)}}),e.jsx(A,{className:"-scale-x-100 text-white size-5"})]}),e.jsx("div",{className:"flex items-center gap-5 font-extralight overflow-auto max-w-full",children:y.map(t=>e.jsx("button",{type:"button",onClick:()=>{const o=i;o.set("tag_id",t.id),h(o)},children:t.name},t.id))})]}):null})]}),e.jsx(L,{variant:"fluid",className:"sm:!px-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-2",children:f.map((t,o)=>{const s=t.images[0],r=s.mediaType==="video"&&!!s.videoUrl;return r?e.jsx("button",{type:"button",onClick:()=>P(t,0),className:"group cursor-pointer",onMouseEnter:()=>{const a=document.querySelector(`video[data-project-index="${o}"]`);a&&a.play().catch(()=>{})},onMouseLeave:()=>{const a=document.querySelector(`video[data-project-index="${o}"]`);a&&a.pause()},children:e.jsxs("div",{className:`aspect-[4/3] relative overflow-hidden transition-all duration-300 ${r?"group-hover:shadow-2xl":"group-hover:shadow-2xl group-hover:bg-white/60"}`,children:[s.mediaType==="video"&&s.videoUrl?s.url?e.jsx("img",{src:s.url,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}):/youtube\.com|youtu\.be/i.test(s.videoUrl)?(()=>{let a;try{const S=new URL(s.videoUrl).searchParams.get("v");S&&S.length===11&&(a=[null,S])}catch{}a||(a=s.videoUrl.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([A-Za-z0-9_-]{11})/i),a||(a=s.videoUrl.match(/([A-Za-z0-9_-]{11})/)));const k=(a?`https://i.ytimg.com/vi/${a[1]}/hqdefault.jpg`:void 0)||"/images/video-placeholder.jpg";return e.jsx("img",{src:k,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"})})():e.jsx("video",{className:"w-full h-full object-cover",src:s.videoUrl,muted:!0,playsInline:!0,loop:!0,preload:"metadata","data-project-index":o,onLoadedMetadata:a=>{try{const x=a.currentTarget;x.readyState>=1&&(x.currentTime=.05,x.pause())}catch{}}}):e.jsx("img",{src:s.url,alt:t.title,className:"w-full h-full group-hover:scale-105 group-hover:blur-[1.5px] object-cover transition-transform duration-300",loading:"lazy"}),r?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out pointer-events-none",children:e.jsx("h3",{className:"font-medium text-lg mb-0 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out text-center","data-koreanable":!0,children:t.title})}):e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out",children:e.jsx("div",{className:"absolute bottom-[40%] left-0 right-0 p-4 text-white transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 ease-out",children:e.jsx("h3",{className:"font-medium text-lg mb-1 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out","data-koreanable":!0,children:t.title})})})]})},t.title):e.jsx("button",{type:"button",onClick:()=>P(t,0),className:"group cursor-pointer",onMouseEnter:()=>{const a=document.querySelector(`video[data-project-index="${o}"]`);a&&a.play().catch(()=>{})},onMouseLeave:()=>{const a=document.querySelector(`video[data-project-index="${o}"]`);a&&a.pause()},children:e.jsxs("div",{className:`aspect-[4/3] relative overflow-hidden transition-all duration-300 ${r?"group-hover:shadow-2xl":"group-hover:shadow-2xl group-hover:bg-white/60"}`,children:[s.mediaType==="video"&&s.videoUrl?s.url?e.jsx("img",{src:s.url,alt:t.title,className:"w-full h-full group-hover:scale-105 group-hover:blur-[1.5px] object-cover transition-transform duration-300",loading:"lazy"}):/youtube\.com|youtu\.be|vimeo\.com/i.test(s.videoUrl)?e.jsx(E,{url:s.videoUrl,title:t.title,className:"w-full h-full object-cover"}):e.jsx("video",{className:"w-full h-full object-cover",src:s.videoUrl,muted:!0,playsInline:!0,loop:!0,preload:"metadata","data-project-index":o,onLoadedMetadata:a=>{try{const x=a.currentTarget;x.readyState>=1&&(x.currentTime=.05,x.pause())}catch{}}}):e.jsx("img",{src:s.url,alt:t.title,className:"w-full h-full group-hover:scale-105 group-hover:blur-[1.5px] object-cover transition-transform duration-300",loading:"lazy"}),r?e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out pointer-events-none",children:e.jsx("div",{className:"absolute bottom-[40%] left-0 right-0 p-4 text-white transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 ease-out",children:e.jsx("h3",{className:"font-medium text-lg mb-1 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out text-center","data-koreanable":!0,children:t.title})})}):e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out",children:e.jsx("div",{className:"absolute bottom-[40%] left-0 right-0 p-4 text-white transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 ease-out",children:e.jsx("h3",{className:"font-medium text-lg mb-1 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ease-out text-center","data-koreanable":!0,children:t.title})})})]})},t.title)})})}),e.jsx(R,{children:v&&m&&e.jsx(T,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeOut"},className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:t=>{t.target===t.currentTarget&&w()},children:e.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-full flex flex-col",children:[e.jsxs("div",{className:"text-center mb-4 px-4",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-medium text-white mb-2","data-koreanable":!0,children:m.title}),e.jsx("p",{className:"text-gray-300 text-sm lg:text-base font-light",children:m.description})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 mb-6 relative",children:e.jsx(W,{setApi:t=>{t&&(N(t),typeof t.on=="function"&&t.on("select",()=>{const o=t.selectedScrollSnap?.();c(typeof o=="number"?o:0)}),typeof t.scrollTo=="function"&&t.scrollTo(j||0))},children:e.jsx(X,{className:"h-full",children:m.images.map(t=>e.jsx(K,{className:"relative w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"relative inline-block max-w-full",children:[t.mediaType==="video"&&t.videoUrl?/youtube\.com|youtu\.be|vimeo\.com/i.test(t.videoUrl)?e.jsx("div",{className:"w-[min(60vw)] h-[min(70vh)]",children:e.jsx(E,{url:t.videoUrl,title:m.title,className:"w-full h-full object-contain rounded-lg"})}):e.jsx("div",{className:"w-[min(60vw)] h-[min(70vh)]",children:e.jsx("video",{src:t.videoUrl||void 0,className:"w-full h-full object-contain rounded-lg",controls:!0,autoPlay:!0,playsInline:!0,controlsList:"nodownload",muted:!0})}):e.jsx("div",{className:"w-[min(90vw,1200px)] h-[min(80vh,800px)]",children:e.jsx("img",{src:t.url,alt:t.title,className:"w-full h-full object-contain rounded-lg"})}),e.jsx("button",{onClick:w,"aria-label":"Close",className:"absolute right-3 top-3 z-50 text-white transition-colors bg-black/40 hover:bg-black/60 rounded-full p-3 cursor-pointer ring-2 ring-white/20",children:e.jsx(q,{className:"w-4 h-4"})})]})},t.id))})})}),m.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors bg-black/50 rounded-full p-3",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>C("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors bg-black/50 rounded-full p-3",children:e.jsx(G,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-none px-2 sm:px-4 pb-4",children:[e.jsx("div",{className:"flex gap-1 sm:gap-2 justify-start sm:justify-center scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 pb-2",children:m.images.map((t,o)=>e.jsx("button",{type:"button",onClick:()=>{d&&typeof d.scrollTo=="function"?d.scrollTo(o):c(o)},className:`flex-none w-16 h-12 sm:w-20 sm:h-16 rounded-md overflow-hidden transition-all duration-200 hover:scale-105 ${o===j?"ring-2 ring-white ring-offset-1 sm:ring-offset-2 ring-offset-black":"opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:t.url,alt:t.title,className:"w-full h-full object-cover",loading:"lazy",onError:s=>{const r=s.target;if(r.src.includes("optimize_attachment_url")){const a=t.url.replace(/optimize_attachment_url/g,"attachment_url");r.src=a}}})},t.id))}),e.jsx("div",{className:"mt-2 sm:mt-4 text-center text-gray-300",children:e.jsx("span",{className:"text-xs sm:text-sm",children:(()=>{const t=m.images,o=t.filter(r=>r.mediaType==="image").length,s=t.filter(r=>r.mediaType==="video").length;return s>0&&o===0?`${s} ${s===1?"video":"videos"}`:o>0&&s===0?`${o} ${o===1?"image":"images"}`:`${s} ${s===1?"video":"videos"} · ${o} ${o===1?"image":"images"}`})()})})]})]})})})]})}export{xe as default,pe as meta};
